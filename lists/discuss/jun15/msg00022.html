<!-- MHonArc v2.6.10 -->
<!--X-Subject: Connectivity to the VLAD OpenStack Management Network -->
<!--X-From-R13: [vxr Terrzba <zserrzbaNvyyvabvf.rqh> -->
<!--X-Date: Tue, 23 Jun 2015 23:29:46 &#45;0500 -->
<!--X-Message-Id: 558A3238.3010609@illinois.edu -->
<!--X-Content-Type: text/plain -->
<!--X-Head-End-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML//EN">
<HTML>
<HEAD>
<TITLE>Connectivity to the VLAD OpenStack Management Network</TITLE>
<LINK REV="made" HREF="mailto:mfreemon@illinois.edu">
</HEAD>
<!--#INCLUDE VIRTUAL="/include/lists/discuss/message-header.html"-->
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<!---->

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<H1>Connectivity to the VLAD OpenStack Management Network<HR></H1>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li><strong>To</strong>: <strong>NDS discuss &lt;<a href="mailto:discuss@DOMAIN.HIDDEN">discuss@xxxxxxxxxxxxxxxxxxxxxxx</a>&gt;</strong></li>
<li><strong>Subject</strong>: <strong>Connectivity to the VLAD OpenStack Management Network</strong></li>
<li><strong>From</strong>: <strong>Mike Freemon &lt;<a href="mailto:mfreemon@DOMAIN.HIDDEN">mfreemon@xxxxxxxxxxxx</a>&gt;</strong></li>
<li>Date: Tue, 23 Jun 2015 23:29:44 -0500</li>
<li>Content-transfer-encoding: 7bit</li>
<li>Content-type: text/plain; charset=utf-8; format=flowed</li>
<li>Reply-to: <a href="mailto:discuss@DOMAIN.HIDDEN">discuss@xxxxxxxxxxxxxxxxxxxxxxx</a></li>
<li>Sender: <a href="mailto:owner-discuss@DOMAIN.HIDDEN">owner-discuss@xxxxxxxxxxxxxxxxxxxxxxx</a></li>
<li>User-agent: Mozilla/5.0 (Windows NT 6.1; WOW64; rv:38.0) Gecko/20100101 Thunderbird/38.0.1</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<hr>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<tt>Here is my proposal for addressing the network connectivity to the 
OpenStack management API endpoints on the VLAD cluster.</tt><br>
<br>
<pre style="margin: 0em;">Problem Statement</pre><br>
<tt>The OpenStack management APIs for the VLAD cluster are on a private 
subnet, accessible only from the vlad-mgmt node.  This prevents 
development and deployment of the NDS Web Services application on any 
machine other than the vlad-mgmt node.</tt><br>
<br>
<pre style="margin: 0em;">Considerations</pre><br>
<tt>We cannot simply change the OS_AUTH_URL string, because the compute 
(nova) API URL is dynamically retrieved from the OpenStack management 
server and is not visible to the application.</tt><br>
<br>
<pre style="margin: 0em;">Solution</pre><br>
<tt>Use an iptables rule to redirect traffic with a destination address of 
10.10.236.1 (the VLAD management network) generated by the NDS 
application to localhost.</tt><br>
<br>
<tt>That traffic is then forwarded via a ssh tunnel from localhost (for the 
specific OpenStack ports) to the real VLAD management network.</tt><br>
<br>
<pre style="margin: 0em;">The commands to do this are:</pre><br>
<tt># iptables -A OUTPUT -t nat -p tcp -d 10.10.236.1 -j DNAT --to 127.0.0.1<br>
# ssh -L localhost:5000:localhost:5000 -L localhost:8774:localhost:8774 
-4 -nNT vlad-mgmt &amp;</tt><br>
<br>
<pre style="margin: 0em;">Benefits</pre><br>
<tt>*     Development and deployment of the NDS Web Services application can 
occur on any machine, not just on the vlad-mgmt server.  This includes 
developer laptops, openstack instances, or anywhere else.<br>
*     There is no special application code needed.  The application 
believes it has normal network connectivity to the API endpoints on the 
OpenStack management node.<br>
*     The same application code runs regardless of the environment in 
which it's running (i.e. the same application runs in the same way in 
the VLAD OpenStack cluster, the NCSA production OpenStack cluster, and 
any other OpenStack clusters.</tt><br>
<br>
<pre style="margin: 0em;"><a  href="https://wiki.ncsa.illinois.edu/display/NDS/Connectivity+to+the+VLAD+OpenStack+Management+Network">https://wiki.ncsa.illinois.edu/display/NDS/Connectivity+to+the+VLAD+OpenStack+Management+Network</a></pre><br>
<pre style="margin: 0em;">- Mike</pre><br>

<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<hr>
<!--X-Follow-Ups-End-->
<!--X-References-->
<!--X-References-End-->
<!--X-BotPNI-->
<HR>
<UL>
<li>Prev by Date:
<strong><a href="msg00021.html">Re: No such file or directory: '/home/mturk/core.pub'</a></strong>
</li>
<li>Next by Date:
<strong><a href="msg00023.html">NDS Labs Developer Meetings</a></strong>
</li>

<li>Previous by thread:
<strong><a href="msg00020.html">FYI regarding sage2 screen sharing</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg00023.html">NDS Labs Developer Meetings</a></strong>
</li>

</UL>
<!--#INCLUDE VIRTUAL="/include/lists/discuss/message-footer.html"-->

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<strong>
<center>
<a href="/lists/">Other Mailing lists</a> |
<a href="author.html">Author Index</a> |
<a href="maillist.html">Date Index</a> |
<a href="subject.html">Subject Index</a> |
<a href="threads.html">Thread Index</a>
</center>
</strong>
<!--X-User-Footer-End-->
</body>
</html>
